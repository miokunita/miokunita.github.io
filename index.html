<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®—å‘½å­¦å ã„ - ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å ã„ã‚µãƒ¼ãƒ“ã‚¹</title>
    <meta name="description" content="ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ç®—å‘½å­¦ã§è©³ã—ãå ã„ã¾ã™ã€‚åå¹²æ”¯ã€å¤©ä¸­æ®ºã€æ€§æ ¼è¨ºæ–­ã€äººä½“å›³ã¾ã§ç„¡æ–™ã§åˆ©ç”¨ã§ãã‚‹æœ¬æ ¼çš„ãªç®—å‘½å­¦å ã„ã‚µã‚¤ãƒˆã§ã™ã€‚">
    <meta name="keywords" content="ç®—å‘½å­¦, å ã„, ç„¡æ–™å ã„, åå¹²æ”¯, å¤©ä¸­æ®º, äººä½“å›³, æ€§æ ¼è¨ºæ–­">
    <meta property="og:title" content="ç®—å‘½å­¦å ã„ - ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å ã„ã‚µãƒ¼ãƒ“ã‚¹">
    <meta property="og:description" content="ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ç®—å‘½å­¦ã§è©³ã—ãå ã„ã¾ã™">
    <meta property="og:type" content="website">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ”®</text></svg>">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', 'Hiragino Kaku Gothic Pro', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: white;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            color: white;
            backdrop-filter: blur(10px);
        }

        .feature-card h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .input-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 5px rgba(102, 126, 234, 0.3);
        }

        .calculate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .calculate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            display: none;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .result-section {
            margin-bottom: 30px;
        }

        .result-section h3 {
            color: #667eea;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .human-chart {
            display: grid;
            grid-template-areas: 
                ". north ."
                "west center east"
                ". south .";
            grid-template-columns: 1fr 1fr 1fr;
            grid-template-rows: 1fr 1fr 1fr;
            gap: 10px;
            max-width: 350px;
            margin: 20px auto;
        }

        .chart-position {
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s;
            cursor: pointer;
        }

        .chart-position:hover {
            transform: scale(1.05);
        }

        .chart-center { grid-area: center; background: linear-gradient(135deg, #ffd700, #ffed4e); }
        .chart-north { grid-area: north; background: linear-gradient(135deg, #87ceeb, #a8dadc); }
        .chart-south { grid-area: south; background: linear-gradient(135deg, #ffa500, #ffb347); }
        .chart-east { grid-area: east; background: linear-gradient(135deg, #98fb98, #90ee90); }
        .chart-west { grid-area: west; background: linear-gradient(135deg, #dda0dd, #e6e6fa); }

        .star-name {
            font-size: 14px;
            color: #333;
            font-weight: bold;
        }

        .star-type {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .characteristics {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
            border-left: 4px solid #667eea;
        }

        .characteristics p {
            margin-bottom: 10px;
        }

        .error {
            color: #e74c3c;
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: rgba(231, 76, 60, 0.1);
            border-radius: 5px;
        }

        .success {
            color: #27ae60;
            text-align: center;
            margin-top: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 10px;
        }

        .loading::after {
            content: '';
            width: 20px;
            height: 20px;
            border: 3px solid #667eea;
            border-top: 3px solid transparent;
            border-radius: 50%;
            display: inline-block;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .info-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }

        .info-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .info-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            border-left: 4px solid #667eea;
        }

        .info-card h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        footer {
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            backdrop-filter: blur(10px);
        }

        .privacy-notice {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.8);
            margin-top: 10px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .input-section, .results, .info-section {
                padding: 20px;
            }

            .features {
                grid-template-columns: 1fr;
            }

            .human-chart {
                max-width: 280px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”® ç®—å‘½å­¦å ã„</h1>
            <p>ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰é‹å‹¢ã‚’è©³ã—ãå ã„ã¾ã™</p>
            
            <div class="features">
                <div class="feature-card">
                    <h3>ğŸŒŸ åå¹²æ”¯è¨ºæ–­</h3>
                    <p>ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰åå¹²æ”¯ã‚’ç®—å‡ºã—ã€åŸºæœ¬æ€§æ ¼ã‚’è¨ºæ–­</p>
                </div>
                <div class="feature-card">
                    <h3>ğŸ‘¤ äººä½“å›³ä½œæˆ</h3>
                    <p>ç²¾ç¥ãƒ»è¡Œå‹•ãƒ»å®¶åº­ãƒ»ç¤¾ä¼šé¢ã®ç‰¹å¾´ã‚’è¦–è¦šåŒ–</p>
                </div>
                <div class="feature-card">
                    <h3>âš ï¸ å¤©ä¸­æ®ºåˆ¤å®š</h3>
                    <p>æ³¨æ„ã™ã¹ãæ™‚æœŸã¨å¯¾ç­–ã‚’ãŠçŸ¥ã‚‰ã›</p>
                </div>
            </div>
        </div>

        <div class="input-section">
            <h2 style="text-align: center; margin-bottom: 20px; color: #667eea;">å ã„æƒ…å ±å…¥åŠ›</h2>
            
            <div class="form-group">
                <label for="name">ãŠåå‰</label>
                <input type="text" id="name" placeholder="ãŠåå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" maxlength="50">
            </div>
            
            <div class="form-group">
                <label for="birthdate">ç”Ÿå¹´æœˆæ—¥</label>
                <input type="date" id="birthdate" min="1900-01-01">
            </div>
            
            <div class="form-group">
                <label for="gender">æ€§åˆ¥</label>
                <select id="gender">
                    <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                    <option value="male">ç”·æ€§</option>
                    <option value="female">å¥³æ€§</option>
                </select>
            </div>
            
            <button class="calculate-btn" onclick="calculateFortune()">ğŸ”® å ã†</button>
            <div id="loading" class="loading"></div>
            <div id="error" class="error"></div>
        </div>

        <div id="results" class="results">
            <h2 style="text-align: center; margin-bottom: 30px; color: #667eea;">âœ¨ å ã„çµæœ âœ¨</h2>
            
            <div class="result-section">
                <h3>ğŸ“‹ åŸºæœ¬æƒ…å ±</h3>
                <div id="basic-info"></div>
            </div>

            <div class="result-section">
                <h3>ğŸ‘¤ äººä½“å›³</h3>
                <div class="human-chart">
                    <div id="north" class="chart-position chart-north">
                        <div class="star-name">åŒ—</div>
                        <div class="star-type">ç²¾ç¥é¢</div>
                    </div>
                    <div id="center" class="chart-position chart-center">
                        <div class="star-name">ä¸­å¤®</div>
                        <div class="star-type">è‡ªåˆ†è‡ªèº«</div>
                    </div>
                    <div id="east" class="chart-position chart-east">
                        <div class="star-name">æ±</div>
                        <div class="star-type">è¡Œå‹•é¢</div>
                    </div>
                    <div id="west" class="chart-position chart-west">
                        <div class="star-name">è¥¿</div>
                        <div class="star-type">å®¶åº­é¢</div>
                    </div>
                    <div id="south" class="chart-position chart-south">
                        <div class="star-name">å—</div>
                        <div class="star-type">ç¤¾ä¼šé¢</div>
                    </div>
                </div>
            </div>

            <div class="result-section">
                <h3>ğŸŒŸ æ€§æ ¼ãƒ»ç‰¹å¾´</h3>
                <div id="characteristics" class="characteristics"></div>
            </div>

            <div class="result-section">
                <h3>âš ï¸ å¤©ä¸­æ®º</h3>
                <div id="tenchukill"></div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button onclick="location.reload()" style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    ğŸ”„ ã‚‚ã†ä¸€åº¦å ã†
                </button>
            </div>
        </div>

        <div class="info-section">
            <h2>ğŸ“š ç®—å‘½å­¦ã«ã¤ã„ã¦</h2>
            <div class="info-grid">
                <div class="info-card">
                    <h4>ç®—å‘½å­¦ã¨ã¯</h4>
                    <p>ä¸­å›½å¤ä»£ã‹ã‚‰ä¼ã‚ã‚‹é‹å‘½å­¦ã®ä¸€ã¤ã§ã€ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰äººã®æ€§æ ¼ã‚„é‹å‹¢ã‚’è©³ç´°ã«åˆ†æã™ã‚‹å­¦å•ã§ã™ã€‚</p>
                </div>
                <div class="info-card">
                    <h4>åå¹²æ”¯ã®æ„å‘³</h4>
                    <p>åå¹²ï¼ˆç”²ä¹™ä¸™ä¸æˆŠå·±åºšè¾›å£¬ç™¸ï¼‰ã¨åäºŒæ”¯ã®çµ„ã¿åˆã‚ã›ã§ã€60é€šã‚Šã®æ€§æ ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¡¨ç¾ã—ã¾ã™ã€‚</p>
                </div>
                <div class="info-card">
                    <h4>äººä½“å›³ã®è¦‹æ–¹</h4>
                    <p>ä¸­å¤®ã¯æœ¬æ¥ã®è‡ªåˆ†ã€åŒ—ã¯ç²¾ç¥é¢ã€å—ã¯ç¤¾ä¼šé¢ã€æ±ã¯è¡Œå‹•é¢ã€è¥¿ã¯å®¶åº­é¢ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚</p>
                </div>
                <div class="info-card">
                    <h4>å¤©ä¸­æ®ºã«ã¤ã„ã¦</h4>
                    <p>äººç”Ÿã«ãŠã„ã¦ç‰¹ã«æ³¨æ„ã™ã¹ãæ™‚æœŸã‚’ç¤ºã—ã€å¤§ããªæ±ºæ–­ã‚„å¤‰åŒ–ã¯é¿ã‘ã‚‹ã“ã¨ãŒæ¨å¥¨ã•ã‚Œã¾ã™ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>Â© 2025 ç®—å‘½å­¦å ã„ | ç„¡æ–™ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å ã„ã‚µãƒ¼ãƒ“ã‚¹</p>
        <div class="privacy-notice">
            <p>â€»å…¥åŠ›ã•ã‚ŒãŸå€‹äººæƒ…å ±ã¯å ã„çµæœã®è¡¨ç¤ºã®ã¿ã«ä½¿ç”¨ã•ã‚Œã€ã‚µãƒ¼ãƒãƒ¼ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>â€»ã“ã®å ã„ã¯å¨¯æ¥½ç›®çš„ã§ã‚ã‚Šã€äººç”Ÿã®é‡è¦ãªæ±ºå®šã®å‚è€ƒç¨‹åº¦ã«ã¨ã©ã‚ã¦ãã ã•ã„ã€‚</p>
        </div>
    </footer>

    <script>
        // Excelãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’JavaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å®šç¾©
        const GANJIS = {
            'ç”²': { element: 'æœ¨', yin_yang: 'é™½', nature: 'æ¨¹æœ¨ã€å·¨æœ¨ã€å¤§æœ¨', characteristics: 'è‡ªç«‹å¿ƒãŒå¼·ã„ã€é ‘å›ºã€ç‹¬ç«‹ç‹¬æ­©ã€èŠ¯ãŒå¼·ã„ã€ãƒã‚¤ãƒšãƒ¼ã‚¹ã€å®ˆã‚Š' },
            'ä¹™': { element: 'æœ¨', yin_yang: 'é™°', nature: 'è‰æœ¨ã€è—¤ã€è‹”ã€è”¦', characteristics: 'ç¤¾äº¤æ€§ã€å”èª¿æ€§ã€å’Œåˆæ€§ã€ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€æ”¿æ²»åŠ›' },
            'ä¸™': { element: 'ç«', yin_yang: 'é™½', nature: 'å¤ªé™½', characteristics: 'æƒ…å ±ä¼é”ã€ãŠãŠã‚‰ã‹ã€è‡ªç„¶ä½“ã€é£Ÿç¢Œã€é•·å¯¿ã€æ­£ç¢ºã«ä¼ãˆã‚‹' },
            'ä¸': { element: 'ç«', yin_yang: 'é™°', nature: 'ç¯ç«ã€ã‚ã†ãã', characteristics: 'ç¹Šç´°ã€ãƒ‡ãƒªã‚±ãƒ¼ãƒˆã€å­¤ç‹¬ã€åç™ºå¿ƒã€å‘ä¸Šå¿ƒã€æ¸©ã‹ã„å¿ƒ' },
            'æˆŠ': { element: 'åœŸ', yin_yang: 'é™½', nature: 'å±±å²³ã€å±±', characteristics: 'æ„›æƒ…ãƒ»å¥‰ä»•ã€é­…åŠ›çš„ã€å„ªã—ã•ã€æ¨©åŠ›ä¸»ç¾©ã€å›è»¢è²¡ã€å™¨ãŒå¤§ãã„' },
            'å·±': { element: 'åœŸ', yin_yang: 'é™°', nature: 'å¹³åœ°ã€ç”°åœ’ã€ç•‘', characteristics: 'å …å®Ÿã€è“„ç©ã€å®‰å®šã€çµå©šé‹ãŒå¼·ã„ã€ã‚³ãƒ„ã‚³ãƒ„å‹ã€åº¶æ°‘æ€§' },
            'åºš': { element: 'é‡‘', yin_yang: 'é™½', nature: 'å²©çŸ³ã€é‰„é‰±çŸ³ã€åˆ€ã€å‰£', characteristics: 'è¡Œå‹•åŠ›ã€å‹‡æ•¢ã€ãƒ†ã‚­ãƒ‘ã‚­ã€çˆ½ã‚„ã‹ã€çŸ­æ°—ã€é£¾ã‚‰ãªã„' },
            'è¾›': { element: 'é‡‘', yin_yang: 'é™°', nature: 'å®çŸ³ã€è²´é‡‘å±ã€å°çŸ³ã€ç ‚åˆ©', characteristics: 'åèª‰ã€åœ°ä½ã€ãƒ—ãƒ©ã‚¤ãƒ‰ã€è²¬ä»»æ„Ÿã€å …ã„ã€å½¹äºº' },
            'å£¬': { element: 'æ°´', yin_yang: 'é™½', nature: 'æµ·ã€å¤§æ¹–ã€å¤§æ²³', characteristics: 'çŸ¥çš„æ¬²æ±‚ã€æµ·å¤–ã€å†’é™ºã€é›¢åˆ¥æ”¾æµªã€æ”¹è‰¯æ”¹é©ã€ä½“é¨“' },
            'ç™¸': { element: 'æ°´', yin_yang: 'é™°', nature: 'é›¨ã€éœ²ã€éœ§ã€é›²ã€å°å·', characteristics: 'å­¦å•ã€æ…ˆæ„›ã€ç´”ç²‹ã€ä¼çµ±ã€æ­£çµ±ã€å¤å…¸çš„ã€ç†è«–å®¶ã€çŸ¥æ€§' }
        };

        // å¤©ä¸­æ®ºã®ç¨®é¡
        const TENCHUKILL_TYPES = {
            'å­ä¸‘': { name: 'å­ä¸‘', months: [12, 1], description: 'æ–°ã—ã„ã“ã¨ã‚’å§‹ã‚ã‚‹å‰ã«ååˆ†ãªæº–å‚™æœŸé–“ã¨ã—ã¦æ´»ç”¨ã—ã¾ã—ã‚‡ã†' },
            'å¯…å¯': { name: 'å¯…å¯', months: [2, 3], description: 'æ˜¥ã®è¨ªã‚Œã¨ã¨ã‚‚ã«ã€å†…é¢çš„ãªæˆé•·ã«é›†ä¸­ã™ã‚‹æ™‚æœŸã§ã™' },
            'è¾°å·³': { name: 'è¾°å·³', months: [4, 5], description: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒé«˜ã¾ã‚‹æ™‚æœŸã§ã™ãŒã€æ…é‡ãªåˆ¤æ–­ãŒå¿…è¦ã§ã™' },
            'åˆæœª': { name: 'åˆæœª', months: [6, 7], description: 'å¤ã®æ´»åŠ›ã‚’æŠ‘ãˆã€å†·é™ã•ã‚’ä¿ã¤ã“ã¨ãŒå¤§åˆ‡ã§ã™' },
            'ç”³é…‰': { name: 'ç”³é…‰', months: [8, 9], description: 'åç©«ã®å­£ç¯€ã«å‘ã‘ã¦ã€ç¾çŠ¶ç¶­æŒã«åŠªã‚ã¾ã—ã‚‡ã†' },
            'æˆŒäº¥': { name: 'æˆŒäº¥', months: [10, 11], description: 'å¹´æœ«ã«å‘ã‘ã¦ã€æ¥å¹´ã®æº–å‚™æœŸé–“ã¨ã—ã¦æ‰ãˆã¾ã—ã‚‡ã†' }
        };

        function calculateAge(birthDate) {
            const today = new Date();
            const birth = new Date(birthDate);
            let age = today.getFullYear() - birth.getFullYear();
            const monthDiff = today.getMonth() - birth.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            
            return age;
        }

        function getYearGanji(year) {
            // 1924å¹´ãŒç”²å­ï¼ˆ1ç•ªç›®ï¼‰ã¨ã—ã¦è¨ˆç®—
            const baseYear = 1924;
            const cycle = ((year - baseYear) % 60 + 60) % 60;
            
            const ganjis = [
                'ç”²å­', 'ä¹™ä¸‘', 'ä¸™å¯…', 'ä¸å¯', 'æˆŠè¾°', 'å·±å·³', 'åºšåˆ', 'è¾›æœª', 'å£¬ç”³', 'ç™¸é…‰',
                'ç”²æˆŒ', 'ä¹™äº¥', 'ä¸™å­', 'ä¸ä¸‘', 'æˆŠå¯…', 'å·±å¯', 'åºšè¾°', 'è¾›å·³', 'å£¬åˆ', 'ç™¸æœª',
                'ç”²ç”³', 'ä¹™é…‰', 'ä¸™æˆŒ', 'ä¸äº¥', 'æˆŠå­', 'å·±ä¸‘', 'åºšå¯…', 'è¾›å¯', 'å£¬è¾°', 'ç™¸å·³',
                'ç”²åˆ', 'ä¹™æœª', 'ä¸™ç”³', 'ä¸é…‰', 'æˆŠæˆŒ', 'å·±äº¥', 'åºšå­', 'è¾›ä¸‘', 'å£¬å¯…', 'ç™¸å¯',
                'ç”²è¾°', 'ä¹™å·³', 'ä¸™åˆ', 'ä¸æœª', 'æˆŠç”³', 'å·±é…‰', 'åºšæˆŒ', 'è¾›äº¥', 'å£¬å­', 'ç™¸ä¸‘',
                'ç”²å¯…', 'ä¹™å¯', 'ä¸™è¾°', 'ä¸å·³', 'æˆŠåˆ', 'å·±æœª', 'åºšç”³', 'è¾›é…‰', 'å£¬æˆŒ', 'ç™¸äº¥'
            ];
            
            return ganjis[cycle];
        }

        function getTenchukillType(yearGanji) {
            const yearGan = yearGanji[0];
            const ganToTenchukill = {
                'ç”²': 'æˆŒäº¥', 'ä¹™': 'æˆŒäº¥',
                'ä¸™': 'ç”³é…‰', 'ä¸': 'ç”³é…‰',
                'æˆŠ': 'åˆæœª', 'å·±': 'åˆæœª',
                'åºš': 'è¾°å·³', 'è¾›': 'è¾°å·³',
                'å£¬': 'å¯…å¯', 'ç™¸': 'å¯…å¯'
            };
            return ganToTenchukill[yearGan] || 'å­ä¸‘';
        }

        function validateInput() {
            const name = document.getElementById('name').value.trim();
            const birthdate = document.getElementById('birthdate').value;
            const gender = document.getElementById('gender').value;

            if (!name) return 'åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
            if (name.length > 50) return 'åå‰ã¯50æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
            if (!birthdate) return 'ç”Ÿå¹´æœˆæ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚';
            if (!gender) return 'æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚';

            const birthYear = new Date(birthdate).getFullYear();
            if (birthYear < 1900 || birthYear > new Date().getFullYear()) {
                return 'æ­£ã—ã„ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
            }

            return null;
        }

        async function calculateFortune() {
            const errorDiv = document.getElementById('error');
            const loadingDiv = document.getElementById('loading');
            const calculateBtn = document.querySelector('.calculate-btn');

            // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
            const validationError = validateInput();
            if (validationError) {
                errorDiv.textContent = validationError;
                return;
            }

            errorDiv.textContent = '';
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°é–‹å§‹
            loadingDiv.style.display = 'block';
            calculateBtn.disabled = true;
            calculateBtn.textContent = 'è¨ˆç®—ä¸­...';

            try {
                // å°‘ã—å¾…æ©Ÿã—ã¦ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ„Ÿã‚’æ¼”å‡º
                await new Promise(resolve => setTimeout(resolve, 1500));

                const name = document.getElementById('name').value.trim();
                const birthdate = document.getElementById('birthdate').value;
                const gender = document.getElementById('gender').value;

                const birthYear = new Date(birthdate).getFullYear();
                const age = calculateAge(birthdate);
                const yearGanji = getYearGanji(birthYear);
                const dayGan = yearGanji[0]; // ç°¡ç•¥åŒ–: å®Ÿéš›ã¯è¤‡é›‘ãªè¨ˆç®—ãŒå¿…è¦
                const tenchukillType = getTenchukillType(yearGanji);

                // åŸºæœ¬æƒ…å ±ã®è¡¨ç¤º
                document.getElementById('basic-info').innerHTML = `
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <p><strong>ğŸ‘¤ ãŠåå‰:</strong> ${name}</p>
                        <p><strong>ğŸ“… ç”Ÿå¹´æœˆæ—¥:</strong> ${new Date(birthdate).toLocaleDateString('ja-JP')}</p>
                        <p><strong>ğŸ‚ å¹´é½¢:</strong> ${age}æ­³</p>
                        <p><strong>ğŸ² å¹´å¹²æ”¯:</strong> ${yearGanji}</p>
                        <p><strong>â˜¯ï¸ æ—¥å¹²:</strong> ${dayGan}</p>
                        <p><strong>âš¥ æ€§åˆ¥:</strong> ${gender === 'male' ? 'ç”·æ€§' : 'å¥³æ€§'}</p>
                    </div>
                `;

                // äººä½“å›³ã®è¡¨ç¤ºï¼ˆç°¡ç•¥åŒ–ï¼‰
                const ganData = GANJIS[dayGan];
                document.getElementById('center').innerHTML = `
                    <div class="star-name">${dayGan}</div>
                    <div class="star-type">${ganData.element}æ€§ ${ganData.yin_yang}</div>
                `;

                // ä»–ã®ä½ç½®ã‚‚æ›´æ–°
                document.getElementById('north').innerHTML += `<div style="font-size: 10px; margin-top: 5px;">æ€è€ƒãƒ»ç›´æ„Ÿ</div>`;
                document.getElementById('south').innerHTML += `<div style="font-size: 10px; margin-top: 5px;">ç¤¾ä¼šã§ã®é¡”</div>`;
                document.getElementById('east').innerHTML += `<div style="font-size: 10px; margin-top: 5px;">è¡Œå‹•ãƒ‘ã‚¿ãƒ¼ãƒ³</div>`;
                document.getElementById('west').innerHTML += `<div style="font-size: 10px; margin-top: 5px;">å®¶æ—é–¢ä¿‚</div>`;

                // æ€§æ ¼ãƒ»ç‰¹å¾´ã®è¡¨ç¤º
                document.getElementById('characteristics').innerHTML = `
                    <p><strong>ğŸŒ³ è‡ªç„¶ç•Œã§ã®è±¡å¾´:</strong> ${ganData.nature}</p>
                    <p><strong>âœ¨ ä¸»ãªç‰¹å¾´:</strong> ${ganData.characteristics}</p>
                    <p><strong>ğŸ”¥ äº”å…ƒç´ :</strong> ${ganData.element}æ€§ï¼ˆ${ganData.yin_yang}ï¼‰</p>
                    <p><strong>ğŸ’­ åŸºæœ¬æ€§æ ¼:</strong> ${getPersonalityDescription(dayGan, gender)}</p>
                `;

                // å¤©ä¸­æ®ºã®è¡¨ç¤º
                const tenchukill = TENCHUKILL_TYPES[tenchukillType];
                document.getElementById('tenchukill').innerHTML = `
                    <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 5px; padding: 15px;">
                        <p><strong>ğŸ”® å¤©ä¸­æ®ºã®ç¨®é¡:</strong> ${tenchukill.name}å¤©ä¸­æ®º</p>
                        <p><strong>ğŸ“… å¤©ä¸­æ®ºæœˆ:</strong> ${tenchukill.months.join('ã€')}æœˆ</p>
                        <p><strong>ğŸ“‹ ã‚¢ãƒ‰ãƒã‚¤ã‚¹:</strong> ${tenchukill.description}</p>
                        <p style="font-size: 0.9rem; color: #666; margin-top: 10px;">
                            â€»å¤©ä¸­æ®ºæœŸé–“ä¸­ã¯æ–°ã—ã„æŒ‘æˆ¦ã‚ˆã‚Šã‚‚ç¾çŠ¶ã®å……å®Ÿã«é›†ä¸­ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚
                        </p>
                    </div>
                `;

                // çµæœã‚’è¡¨ç¤º
                document.getElementById('results').style.display = 'block';
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });

            } catch (error) {
                errorDiv.textContent = 'è¨ˆç®—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚';
            } finally {
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çµ‚äº†
                loadingDiv.style.display = 'none';
                calculateBtn.disabled = false;
                calculateBtn.textContent = 'ğŸ”® å ã†';
            }
        }

        function getPersonalityDescription(dayGan, gender) {
            const descriptions = {
                'ç”²': gender === 'male' ? 
                    'å¤§ããªç›®æ¨™ã«å‘ã‹ã£ã¦ã‚³ãƒ„ã‚³ãƒ„ã¨åŠªåŠ›ã‚’é‡ã­ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ãŒã‚ã‚Šã€å‘¨å›²ã‹ã‚‰ã®ä¿¡é ¼ã‚‚åšã„æ–¹ã§ã—ã‚‡ã†ã€‚' :
                    'èŠ¯ã®å¼·ã•ã‚’æŒã¡ãªãŒã‚‰ã‚‚ã€å„ªã—ã•ã¨åŒ…å®¹åŠ›ã‚’å…¼ã­å‚™ãˆãŸå¥³æ€§ã§ã™ã€‚å®¶åº­ã¨ä»•äº‹ã®ä¸¡ç«‹ã‚‚ä¸Šæ‰‹ã«ã“ãªã—ã¾ã™ã€‚',
                'ä¹™': gender === 'male' ? 
                    'å”èª¿æ€§ã«å„ªã‚Œã€ãƒãƒ¼ãƒ ã‚’ã¾ã¨ã‚ã‚‹èƒ½åŠ›ã«é•·ã‘ã¦ã„ã¾ã™ã€‚æ”¿æ²»åŠ›ã‚‚ã‚ã‚Šã€äººã¨ã®é–¢ä¿‚æ§‹ç¯‰ãŒå¾—æ„ã§ã™ã€‚' :
                    'ç¤¾äº¤çš„ã§äººå½“ãŸã‚ŠãŒè‰¯ãã€å¤šãã®äººã‹ã‚‰æ„›ã•ã‚Œã‚‹é­…åŠ›çš„ãªå¥³æ€§ã§ã™ã€‚ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³èƒ½åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚',
                'ä¸™': gender === 'male' ? 
                    'æ˜ã‚‹ãé–‹æ”¾çš„ã§ã€æƒ…å ±ä¼é”èƒ½åŠ›ã«å„ªã‚Œã¦ã„ã¾ã™ã€‚è‡ªç„¶ä½“ã§ã‚ã‚ŠãªãŒã‚‰ã€æ­£ç¢ºæ€§ã‚‚é‡è¦–ã™ã‚‹æ–¹ã§ã™ã€‚' :
                    'ãŠãŠã‚‰ã‹ã§æ¸©ã‹ã„äººæŸ„ã®å¥³æ€§ã§ã™ã€‚å‘¨å›²ã‚’æ˜ã‚‹ãã™ã‚‹å¤ªé™½ã®ã‚ˆã†ãªå­˜åœ¨ã¨ã—ã¦æ…•ã‚ã‚Œã‚‹ã§ã—ã‚‡ã†ã€‚',
                'ä¸': gender === 'male' ? 
                    'ç¹Šç´°ã§å‘ä¸Šå¿ƒãŒå¼·ãã€è‡ªåˆ†ã®ä¸–ç•Œã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚å°‚é–€æ€§ã‚’æ´»ã‹ã—ãŸåˆ†é‡ã§åŠ›ã‚’ç™ºæ®ã™ã‚‹ã§ã—ã‚‡ã†ã€‚' :
                    'ãƒ‡ãƒªã‚±ãƒ¼ãƒˆã§å¿ƒå„ªã—ã„å¥³æ€§ã§ã™ã€‚èŠ¸è¡“çš„ã‚»ãƒ³ã‚¹ãŒã‚ã‚Šã€ç¾ã—ã„ã‚‚ã®ã¸ã®æ„Ÿå—æ€§ãŒè±Šã‹ã§ã™ã€‚',
                'æˆŠ': gender === 'male' ? 
                    'æ„›æƒ…æ·±ãå¥‰ä»•ç²¾ç¥ã«å¯Œã‚“ã§ã„ã¾ã™ã€‚äººãƒ»ç‰©ãƒ»ãŠé‡‘ã‚’å¾ªç’°ã•ã›ã‚‹èƒ½åŠ›ãŒã‚ã‚Šã€ãƒªãƒ¼ãƒ€ãƒ¼ã¨ã—ã¦æ´»èºã—ã¾ã™ã€‚' :
                    'æ¯æ€§æ„›ã«æº¢ã‚Œã€å‘¨å›²ã®äººã‚’å¤§åˆ‡ã«ã™ã‚‹å„ªã—ã„å¥³æ€§ã§ã™ã€‚å®¶åº­é‹ã«æµã¾ã‚Œã€å®‰å®šã—ãŸç”Ÿæ´»ã‚’ç¯‰ãã¾ã™ã€‚',
                'å·±': gender === 'male' ? 
                    'å …å®Ÿã§å®‰å®šã‚’é‡è¦–ã—ã€ã‚³ãƒ„ã‚³ãƒ„ã¨åŠªåŠ›ã‚’ç©ã¿é‡ã­ã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚çµå©šé‹ã‚‚è‰¯ãã€å®¶åº­ã‚’å¤§åˆ‡ã«ã—ã¾ã™ã€‚' :
                    'å …å®Ÿã§å®¶åº­çš„ãªå¥³æ€§ã§ã™ã€‚è“„ç©å‹ã®é‹å‹¢ã‚’æŒã¡ã€ç€å®Ÿã«å¹¸ã›ã‚’ç¯‰ã„ã¦ã„ãã§ã—ã‚‡ã†ã€‚',
                'åºš': gender === 'male' ? 
                    'è¡Œå‹•åŠ›ãŒã‚ã‚Šå‹‡æ•¢ã§ã€ãƒ†ã‚­ãƒ‘ã‚­ã¨ç‰©äº‹ã‚’å‡¦ç†ã—ã¾ã™ã€‚çˆ½ã‚„ã‹ãªå°è±¡ã‚’ä¸ãˆã‚‹é ¼ã‚ŠãŒã„ã®ã‚ã‚‹ç”·æ€§ã§ã™ã€‚' :
                    'è¡Œå‹•åŠ›ãŒã‚ã‚Šã€é£¾ã‚‰ãªã„æ€§æ ¼ã®å¥³æ€§ã§ã™ã€‚çŸ­æ°—ãªé¢ã‚‚ã‚ã‚Šã¾ã™ãŒã€ç‡ç›´ã§ä¿¡é ¼ã§ãã‚‹äººæŸ„ã§ã™ã€‚',
                'è¾›': gender === 'male' ? 
                    'ãƒ—ãƒ©ã‚¤ãƒ‰ãŒé«˜ãè²¬ä»»æ„ŸãŒå¼·ã„ã€å½¹äººã‚¿ã‚¤ãƒ—ã®ç”·æ€§ã§ã™ã€‚åèª‰ã¨åœ°ä½ã‚’é‡è¦–ã—ã€å …å®Ÿã«æ­©ã‚“ã§ã„ãã¾ã™ã€‚' :
                    'ä¸Šå“ã§è²¬ä»»æ„Ÿã®å¼·ã„å¥³æ€§ã§ã™ã€‚ãƒ—ãƒ©ã‚¤ãƒ‰ã‚’æŒã£ã¦ç”Ÿãã¦ãŠã‚Šã€å‘¨å›²ã‹ã‚‰ã‚‚ä¸€ç›®ç½®ã‹ã‚Œã‚‹å­˜åœ¨ã§ã™ã€‚',
                'å£¬': gender === 'male' ? 
                    'çŸ¥çš„å¥½å¥‡å¿ƒãŒæ—ºç››ã§ã€æ”¹è‰¯æ”¹é©ã‚’å¥½ã¿ã¾ã™ã€‚æµ·å¤–ã¨ã®ç¸ã‚‚ã‚ã‚Šã€å†’é™ºå¿ƒã«å¯Œã‚“ã æ–¹ã§ã™ã€‚' :
                    'çŸ¥çš„ã§å¥½å¥‡å¿ƒæ—ºç››ãªå¥³æ€§ã§ã™ã€‚æ–°ã—ã„ã“ã¨ã¸ã®æ¢ç©¶å¿ƒãŒã‚ã‚Šã€å¤‰åŒ–ã‚’æã‚Œãªã„é€²æ­©çš„ãªäººã§ã™ã€‚',
                'ç™¸': gender === 'male' ? 
                    'å­¦å•ã‚’æ„›ã—ã€ç´”ç²‹ã§ä¼çµ±ã‚’é‡ã‚“ã˜ã¾ã™ã€‚çŸ¥æ€§çš„ã§ç†è«–å®¶ã‚¿ã‚¤ãƒ—ã®è½ã¡ç€ã„ãŸç”·æ€§ã§ã™ã€‚' :
                    'æ…ˆæ„›ã«æº€ã¡ã€ç´”ç²‹ã§ä¸Šå“ãªå¥³æ€§ã§ã™ã€‚å¤å…¸çš„ãªç¾ã—ã•ã‚’æŒã¡ã€çŸ¥æ€§ã¨å“æ ¼ã‚’å…¼ã­å‚™ãˆã¦ã„ã¾ã™ã€‚'
            };
            return descriptions[dayGan] || 'å€‹æ€§è±Šã‹ãªæ€§æ ¼ã‚’ãŠæŒã¡ã®æ–¹ã§ã™ã€‚';
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®š
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const maxDate = today.toISOString().split('T')[0];
            document.getElementById('birthdate').max = maxDate;
        });

        // ã‚¨ãƒ³ã‚¿ãƒ¼ã‚­ãƒ¼ã§å ã„å®Ÿè¡Œ
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && !document.querySelector('.calculate-btn').disabled) {
                calculateFortune();
            }
        });
    </script>
</body>
</html>
